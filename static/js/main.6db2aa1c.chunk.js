(this.webpackJsonpbubble_wars=this.webpackJsonpbubble_wars||[]).push([[0],{13:function(n,e,t){},14:function(n,e,t){},15:function(n,e,t){"use strict";t.r(e);var r=t(1),c=t(0),o=t.n(c),a=t(5),i=t.n(a),l=(t(13),t(6)),u=t(4),f=(t(14),t(7));function s(n){var e=Object(c.useRef)(null),t=n.draw;return Object(c.useEffect)((function(){var n=e.current;if(null!==n){var r=n.getContext("2d");if(null!==r){var c=0,o=0;return function n(){c++,t(r,c),o=window.requestAnimationFrame(n)}(),function(){window.cancelAnimationFrame(o)}}}}),[t]),Object(r.jsx)("canvas",Object(f.a)({ref:e},n))}var d=20;function p(n){switch(n){case null:return"#aaaaaa";case"red":return"#ff0000";case"player":return"#00ff00"}return"#aaaaaa"}var v=function(){var n=function(){for(var n=[{x:100,y:100,faction:"player",power:3,connections:[1,3]},{x:250,y:50,faction:null,power:3,connections:[0,2,3]},{x:400,y:100,faction:null,power:3,connections:[1,3]},{x:250,y:150,faction:null,power:3,connections:[0,1,2,4,6]},{x:100,y:250,faction:null,power:3,connections:[3,5]},{x:250,y:300,faction:"red",power:3,connections:[4,6]},{x:400,y:250,faction:null,power:3,connections:[3,5]}],e=[],t=0;t<n.length;t++)for(var r=0;r<n[t].connections.length;r++){var c,o={n1:t,n2:n[t].connections[r]},a=!1,i=Object(u.a)(e);try{for(i.s();!(c=i.n()).done;){var l=c.value;if(o.n1===l.n1&&o.n2===l.n2||o.n1===l.n2&&o.n2===l.n1){a=!0;break}}}catch(f){i.e(f)}finally{i.f()}a||e.push(o)}return[n,e]}(),e=Object(l.a)(n,2),t=e[0],o=e[1],a=Object(c.useRef)(t),i=Object(c.useRef)(o),f=Object(c.useRef)([]),v=Object(c.useRef)(null),h=function(n,e){var t=v.current;if(v.current=function(n,e){for(var t=0;t<a.current.length;t++){var r=a.current[t],c=r.x,o=r.y;if(c-10<n&&c+10>n&&o-10<e&&o+10>e)return t}return null}(n,e),null!==v.current&&null!==t){var r=a.current[t];"player"===r.faction&&(f.current.push({startNode:t,endNode:v.current,power:r.power,faction:r.faction,t:0}),r.power=0,v.current=null)}};return Object(r.jsx)("div",{style:{borderStyle:"solid",borderWidth:"1px",borderColor:"black",width:"500px",height:"500px"},children:Object(r.jsx)(s,{width:"500px",height:"500px",onClick:function(n){var e=n.clientX,t=n.clientY;h(e,t)},draw:function(n,e){!function(n){if(n%50===0)for(var e=0;e<a.current.length;e++)null!==a.current[e].faction&&a.current[e].power++;for(var t=[],r=0;r<f.current.length;r++){var c=f.current[r];c.t+=.0075,c.t>=1&&t.push(r)}for(var o=0,i=t;o<i.length;o++){var l=i[o],u=f.current[l],s=a.current[u.endNode];s.faction===u.faction?s.power+=u.power:(s.power-=u.power,s.power<=0&&(s.power=Math.abs(s.power),s.faction=u.faction)),f.current.splice(l,1)}}(e),n.clearRect(0,0,n.canvas.width,n.canvas.height);var t,r=Object(u.a)(i.current);try{for(r.s();!(t=r.n()).done;){var c=t.value,o=c.n1,l=c.n2,s=a.current[o],h=a.current[l];n.beginPath(),n.moveTo(s.x,s.y),n.lineTo(h.x,h.y),n.stroke()}}catch(B){r.e(B)}finally{r.f()}n.textAlign="center",n.textBaseline="middle";for(var w=0;w<f.current.length;w++){var b=f.current[w],x=b.startNode,y=b.endNode,g=b.power,j=b.faction,O=b.t,m=a.current[x],F=a.current[y],R=m.x*(1-O)+F.x*O,S=m.y*(1-O)+F.y*O;n.fillStyle=p(j),n.beginPath(),n.arc(R,S,10,0,2*Math.PI),n.fill(),n.fillStyle="#000000",n.fillText(g.toFixed(0),R,S)}for(var k=0;k<a.current.length;k++){var C=a.current[k],T=C.x,N=C.y,P=C.power,A=C.faction;if(v.current===k){n.fillStyle="#000000";n.fillRect(T-11,N-11,22,22)}n.fillStyle=p(A),n.fillRect(T-10,N-10,d,d),n.fillStyle="#000000",n.fillText(P.toFixed(0),T,N)}}})})},h=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,16)).then((function(e){var t=e.getCLS,r=e.getFID,c=e.getFCP,o=e.getLCP,a=e.getTTFB;t(n),r(n),c(n),o(n),a(n)}))};i.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(v,{})}),document.getElementById("root")),h()}},[[15,1,2]]]);
//# sourceMappingURL=main.6db2aa1c.chunk.js.map
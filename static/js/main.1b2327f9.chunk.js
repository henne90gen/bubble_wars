(this.webpackJsonpbubble_wars=this.webpackJsonpbubble_wars||[]).push([[0],{13:function(e,n,t){},14:function(e,n,t){},15:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t(1),c=t.n(o),a=t(6),l=t.n(a),i=(t(13),t(5)),f=t(2),u=(t(14),t(7));function d(e){var n=Object(o.useRef)(null),t=e.draw;return Object(o.useEffect)((function(){var e=n.current;if(null!==e){var r=e.getContext("2d");if(null!==r){var o=0,c=0;return function e(){o++,t(r,o),c=window.requestAnimationFrame(e)}(),function(){window.cancelAnimationFrame(c)}}}}),[t]),Object(r.jsx)("canvas",Object(u.a)({ref:n},e))}var s=20,v=["none","red","player"];function b(e){switch(e){case null:return"#aaaaaa";case"red":return"#ff0000";case"player":return"#00ff00"}return"#aaaaaa"}var h=function(){var e=function(){for(var e=[{x:100,y:100,faction:"player",power:3,connections:[1,3]},{x:250,y:50,faction:"none",power:3,connections:[0,2,3]},{x:400,y:100,faction:"none",power:3,connections:[1,3]},{x:250,y:150,faction:"none",power:3,connections:[0,1,2,4,6]},{x:100,y:250,faction:"none",power:3,connections:[3,5]},{x:250,y:300,faction:"red",power:3,connections:[4,6]},{x:400,y:250,faction:"none",power:3,connections:[3,5]}],n=[],t=0;t<e.length;t++)for(var r=0;r<e[t].connections.length;r++){var o,c={n1:t,n2:e[t].connections[r]},a=!1,l=Object(f.a)(n);try{for(l.s();!(o=l.n()).done;){var i=o.value;if(c.n1===i.n1&&c.n2===i.n2||c.n1===i.n2&&c.n2===i.n1){a=!0;break}}}catch(u){l.e(u)}finally{l.f()}a||n.push(c)}return[e,n]}(),n=Object(i.a)(e,2),t=n[0],c=n[1],a=Object(o.useRef)(t),l=Object(o.useRef)(c),u=Object(o.useRef)([]),h=Object(o.useRef)(null),w=Object(o.useState)({none:{totalPower:3,controlledNodes:1},player:{totalPower:3,controlledNodes:1},red:{totalPower:3,controlledNodes:1}}),p=Object(i.a)(w,2),j=p[0],y=p[1],x=function(e,n){var t=h.current;if(h.current=function(e,n){for(var t=0;t<a.current.length;t++){var r=a.current[t],o=r.x,c=r.y;if(o-10<e&&o+10>e&&c-10<n&&c+10>n)return t}return null}(e,n),null!==h.current&&null!==t){var r=a.current[t];if("player"===r.faction){var o,c=!1,l=Object(f.a)(r.connections);try{for(l.s();!(o=l.n()).done;){var i=o.value;if(h.current===i){c=!0;break}}}catch(d){l.e(d)}finally{l.f()}c&&(u.current.push({startNode:t,endNode:h.current,power:r.power,faction:r.faction,t:0}),r.power=0,h.current=null)}}};return Object(r.jsxs)("div",{style:{borderStyle:"solid",borderWidth:"1px",borderColor:"black",width:"500px",height:"500px"},children:[Object(r.jsx)(d,{width:"500px",height:"500px",onClick:function(e){var n=e.clientX,t=e.clientY;x(n,t)},draw:function(e,n){!function(e){if(e%60===0){var n,t={none:{totalPower:0,controlledNodes:0},red:{totalPower:0,controlledNodes:0},player:{totalPower:0,controlledNodes:0}},r=Object(f.a)(a.current);try{for(r.s();!(n=r.n()).done;){var o=n.value;t[o.faction].controlledNodes++,t[o.faction].totalPower+=o.power}}catch(O){r.e(O)}finally{r.f()}var c,l=Object(f.a)(u.current);try{for(l.s();!(c=l.n()).done;){var i=c.value;t[i.faction].totalPower+=i.power}}catch(O){l.e(O)}finally{l.f()}y(t)}if(e%50===0)for(var d=0;d<a.current.length;d++)"none"!==a.current[d].faction&&a.current[d].power++;for(var s=[],v=0;v<u.current.length;v++){var b=u.current[v];b.t+=.0075,b.t>=1&&s.push(v)}for(var h=0,w=s;h<w.length;h++){var p=w[h],j=u.current[p],x=a.current[j.endNode];x.faction===j.faction?x.power+=j.power:(x.power-=j.power,x.power<=0&&(x.power=Math.abs(x.power),x.faction=j.faction)),u.current.splice(p,1)}}(n),e.clearRect(0,0,e.canvas.width,e.canvas.height);var t,r=Object(f.a)(l.current);try{for(r.s();!(t=r.n()).done;){var o=t.value,c=o.n1,i=o.n2,d=a.current[c],v=a.current[i];e.beginPath(),e.moveTo(d.x,d.y),e.lineTo(v.x,v.y),e.stroke()}}catch(I){r.e(I)}finally{r.f()}e.textAlign="center",e.textBaseline="middle";for(var w=0;w<u.current.length;w++){var p=u.current[w],j=p.startNode,x=p.endNode,O=p.power,g=p.faction,P=p.t,N=a.current[j],m=a.current[x],F=N.x*(1-P)+m.x*P,S=N.y*(1-P)+m.y*P;e.fillStyle=b(g),e.beginPath(),e.arc(F,S,10,0,2*Math.PI),e.fill(),e.fillStyle="#000000",e.fillText(O.toFixed(0),F,S)}for(var C=0;C<a.current.length;C++){var R=a.current[C],T=R.x,k=R.y,A=R.power,B=R.faction;if(h.current===C){e.fillStyle="#000000";e.fillRect(T-11,k-11,22,22)}e.fillStyle=b(B),e.fillRect(T-10,k-10,s,s),e.fillStyle="#000000",e.fillText(A.toFixed(0),T,k)}}}),Object(r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr"},children:[Object(r.jsx)("div",{children:"Faction"}),Object(r.jsx)("div",{children:"Total Power"}),Object(r.jsx)("div",{children:"Controlled Nodes"}),v.map((function(e){var n=j[e];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{children:e}),Object(r.jsx)("div",{children:n.totalPower}),Object(r.jsx)("div",{children:n.controlledNodes})]})}))]})]})},w=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,16)).then((function(n){var t=n.getCLS,r=n.getFID,o=n.getFCP,c=n.getLCP,a=n.getTTFB;t(e),r(e),o(e),c(e),a(e)}))};l.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(h,{})}),document.getElementById("root")),w()}},[[15,1,2]]]);
//# sourceMappingURL=main.1b2327f9.chunk.js.map